RGraph=window.RGraph||{isRGraph:true};(function(win,doc,undefined){var RG=RGraph,ua=navigator.userAgent,ma=Math;RG.Highlight={};RG.Registry={};RG.Registry.store=[];RG.Registry.store["chart.event.handlers"]=[];RG.Registry.store["__rgraph_event_listeners__"]=[];RG.Background={};RG.background={};RG.objects=[];RG.Resizing={};RG.events=[];RG.cursor=[];RG.Effects=RG.Effects||{};RG.cache=[];RG.ObjectRegistry={};RG.ObjectRegistry.objects={};RG.ObjectRegistry.objects.byUID=[];RG.ObjectRegistry.objects.byCanvasID=[];RG.PI=ma.PI;RG.HALFPI=RG.PI/2;RG.TWOPI=RG.PI*2;RG.ISFF=ua.indexOf("Firefox")!=-1;RG.ISOPERA=ua.indexOf("Opera")!=-1;RG.ISCHROME=ua.indexOf("Chrome")!=-1;RG.ISSAFARI=ua.indexOf("Safari")!=-1&&!RG.ISCHROME;RG.ISWEBKIT=ua.indexOf("WebKit")!=-1;RG.ISIE=ua.indexOf("Trident")>0||navigator.userAgent.indexOf("MSIE")>0;RG.ISIE6=ua.indexOf("MSIE 6")>0;RG.ISIE7=ua.indexOf("MSIE 7")>0;RG.ISIE8=ua.indexOf("MSIE 8")>0;RG.ISIE9=ua.indexOf("MSIE 9")>0;RG.ISIE10=ua.indexOf("MSIE 10")>0;RG.ISOLD=RGraph.ISIE6||RGraph.ISIE7||RGraph.ISIE8;RG.ISIE11UP=ua.indexOf("MSIE")==-1&&ua.indexOf("Trident")>0;RG.ISIE10UP=RG.ISIE10||RG.ISIE11UP;RG.ISIE9UP=RG.ISIE9||RG.ISIE10UP;RG.getScale=function(e,t){if(e==0){return["0.2","0.4","0.6","0.8","1.0"]}var n=e;if(e<=1){if(e>.5){return[.2,.4,.6,.8,Number(1).toFixed(1)]}else if(e>=.1){return t.Get("chart.scale.round")?[.2,.4,.6,.8,1]:[.1,.2,.3,.4,.5]}else{var r=e;var i=0;while(r<1.01){i+=1;r*=10}var s=["2e-"+i,"4e-"+i,"6e-"+i,"8e-"+i,"10e-"+i];if(e<="5e-"+i){s=["1e-"+i,"2e-"+i,"3e-"+i,"4e-"+i,"5e-"+i]}return s}}if(String(e).indexOf(".")>0){e=String(e).replace(/\.\d+$/,"")}var o=ma.pow(10,Number(String(Number(e)).length-1));var u=o;while(u<e){u+=o/2}if(Number(n)>Number(u)){u+=o/2}if(e<10){u=Number(n)<=5?5:10}if(t&&typeof t.Get("chart.scale.round")=="boolean"&&t.Get("chart.scale.round")){u=10*o}return[u*.2,u*.4,u*.6,u*.8,u]};RG.getScale2=function(e,t){var n=e.canvas;var r=e.context;var i=e.properties;var s=typeof t["ylabels.count"]=="number"?t["ylabels.count"]:5;var o=typeof t["units.pre"]=="string"?t["units.pre"]:"";var u=typeof t["units.post"]=="string"?t["units.post"]:"";var a=Number(t["max"]);var f=typeof t["min"]=="number"?t["min"]:0;var l=t["strict"];var c=Number(t["scale.decimals"]);var h=t["scale.point"];var p=t["scale.thousand"];var d=a;var v=t["scale.round"];var m={max:1,labels:[]};if(!a){var a=1;var m={max:1,min:0,labels:[]};for(var g=0;g<s;++g){var y=(((a-f)/s+f)*(g+1)).toFixed(c);m.labels.push(o+y+u)}}else if(a<=1&&!l){if(a>.5){a=1;f=f;m.min=f;for(var g=0;g<s;++g){var y=((a-f)/s*(g+1)+f).toFixed(c);m.labels.push(o+y+u)}}else if(a>=.1){a=.5;f=f;m={max:.5,min:f,labels:[]};for(var g=0;g<s;++g){var y=(((a-f)/s+f)*(g+1)).toFixed(c);m.labels.push(o+y+u)}}else{m={min:f,labels:[]};var b=String(a);if(b.indexOf("e")>0){var w=ma.abs(b.substring(b.indexOf("e")+1))}else{var w=String(a).length-2}var a=1/ma.pow(10,w-1);for(var g=0;g<s;++g){var y=((a-f)/s+f)*(g+1);y=y.toExponential();y=y.split(/e/);y[0]=ma.round(y[0]);y=y.join("e");m.labels.push(y)}tmp=m.labels[m.labels.length-1].split(/e/);tmp[0]+=0;tmp[1]=Number(tmp[1])-1;tmp=tmp[0]+"e"+tmp[1];m.labels[m.labels.length-1]=tmp;for(var g=0;g<m.labels.length;++g){m.labels[g]=o+m.labels[g]+u}m.max=Number(a)}}else if(!l){a=ma.ceil(a);var E=ma.pow(10,ma.max(1,Number(String(Number(a)-Number(f)).length-1)));var S=E;while(S<a){S+=E/2}if(Number(d)>Number(S)){S+=E/2}if(a<=10){S=Number(d)<=5?5:10}if(e&&typeof v=="boolean"&&v){S=10*E}m.max=S;var x=i["chart.scale.point"];var T=i["chart.scale.thousand"];e.Set("chart.scale.thousand",p);e.Set("chart.scale.point",h);for(var g=0;g<s;++g){m.labels.push(RG.number_format(e,((g+1)/s*(S-f)+f).toFixed(c),o,u))}e.Set("chart.scale.thousand",T);e.Set("chart.scale.point",x)}else if(typeof a=="number"&&l){for(var g=0;g<s;++g){m.labels.push(RG.number_format(e,((g+1)/s*(a-f)+f).toFixed(c),o,u))}m.max=a}m.units_pre=o;m.units_post=u;m.point=h;m.decimals=c;m.thousand=p;m.numlabels=s;m.round=Boolean(v);m.min=f;return m};RG.arrayClone=RG.array_clone=function(e){if(e===null||typeof e!=="object"){return e}var t=[];for(var n=0,r=e.length;n<r;++n){if(typeof e[n]==="number"){t[n]=function(e){return Number(e)}(e[n])}else if(typeof e[n]==="string"){t[n]=function(e){return String(e)}(e[n])}else if(typeof e[n]==="function"){t[n]=e[n]}else{t[n]=RG.array_clone(e[n])}}return t};RG.arrayMax=RG.array_max=function(e){var t=null;var n=Math;if(typeof e==="number"){return e}if(RG.is_null(e)){return 0}for(var r=0,i=e.length;r<i;++r){if(typeof e[r]==="number"){var s=arguments[1]?n.abs(e[r]):e[r];if(typeof t==="number"){t=n.max(t,s)}else{t=s}}}return t};RG.arrayPad=RG.array_pad=function(e,t){if(e.length<t){var n=arguments[2]?arguments[2]:null;for(var r=e.length;r<t;r+=1){e[r]=n}}return e};RG.arraySum=RG.array_sum=function(e){if(typeof e==="number"){return e}if(RG.is_null(e)){return 0}var t,n,r=e.length;for(t=0,n=0;t<r;n+=e[t++]);return n};RG.arrayLinearize=RG.array_linearize=function(){var e=[];var t=arguments;for(var n=0,r=t.length;n<r;++n){if(typeof t[n]==="object"&&t[n]){for(var i=0,s=t[n].length;i<s;++i){var o=RG.array_linearize(t[n][i]);for(var u=0,a=o.length;u<a;++u){e.push(o[u])}}}else{e.push(t[n])}}return e};RG.arrayShift=RG.array_shift=function(e){var t=[];for(var n=1,r=e.length;n<r;++n){t.push(e[n])}return t};RG.arrayReverse=RG.array_reverse=function(e){var t=[];for(var n=e.length-1;n>=0;n-=1){t.push(e[n])}return t};RG.clear=RG.Clear=function(e){var t=e.__object__;var n=e.getContext("2d");var r=arguments[1]||t&&t.get("clearto");if(!e){return}RG.FireCustomEvent(t,"onbeforeclear");if(RG.ISIE8&&!r){r="white"}if(!r||r&&r==="rgba(0,0,0,0)"||r==="transparent"){n.clearRect(0,0,e.width,e.height);n.globalCompositeOperation="source-over"}else{n.fillStyle=r;n.beginPath();if(RG.ISIE8){n.fillRect(0,0,e.width,e.height)}else{n.fillRect(-10,-10,e.width+20,e.height+20)}n.fill()}if(RG.Registry.Get("chart.background.image."+e.id)){var i=RG.Registry.Get("chart.background.image."+e.id);i.style.position="absolute";i.style.left="-10000px";i.style.top="-10000px"}if(RG.Registry.Get("chart.tooltip")){RG.HideTooltip(e)}e.style.cursor="default";RG.FireCustomEvent(t,"onclear")};RG.drawTitle=RG.DrawTitle=function(e,t,n){var r=canvas=e.canvas;var i=context=e.context;var s=e.properties;if(arguments[5]){var r=canvas=arguments[5].canvas;var i=context=arguments[5].context}var o=s["chart.gutter.left"];var u=s["chart.gutter.right"];var n=n;var a=s["chart.gutter.bottom"];var f=arguments[4]?arguments[4]:12;var l=s["chart.title.bold"];var c=arguments[3]?arguments[3]:(r.width-o-u)/2+o;var h=s["chart.key.position"];var p=s["chart.title.vpos"];var d=s["chart.title.hpos"];var v=s["chart.title.background"];var m=s["chart.title.x"];var g=s["chart.title.y"];var y="center";var b="center";if(e.type=="bar"&&s["chart.variant"]=="3d"){h="gutter"}i.beginPath();i.fillStyle=s["chart.text.color"]?s["chart.text.color"]:"black";if(h&&h!="gutter"){var b="center"}else if(!h){var b="center"}else{var b="bottom"}if(typeof s["chart.title.vpos"]==="number"){p=s["chart.title.vpos"]*n;if(s["chart.xaxispos"]==="top"){p=s["chart.title.vpos"]*a+n+(r.height-n-a)}}else{p=n-f-5;if(s["chart.xaxispos"]==="top"){p=r.height-a+f+5}}if(typeof d==="number"){c=d*r.width}if(typeof m==="number")c=m;if(typeof g==="number")p=g;if(typeof s["chart.title.halign"]==="string"){y=s["chart.title.halign"]}if(typeof s["chart.title.valign"]==="string"){b=s["chart.title.valign"]}if(typeof s["chart.title.color"]!==null){var w=i.fillStyle;var E=s["chart.title.color"];i.fillStyle=E?E:"black"}var S=s["chart.text.font"];if(typeof s["chart.title.font"]==="string"){S=s["chart.title.font"]}RG.Text2(i,{font:S,size:f,x:c,y:p,text:t,valign:b,halign:y,bounding:v!=null,"bounding.fill":v,bold:l,tag:"title"});i.fillStyle=w};RG.getMouseXY=function(e){var t=e.target;var n=t;var r=n.style;var i=0;var s=0;var o;var u;var a=n.style.position=="fixed";var f=parseInt(r.borderLeftWidth)||0;var l=parseInt(r.borderTopWidth)||0;var c=parseInt(r.paddingLeft)||0;var h=parseInt(r.paddingTop)||0;var p=f+c;var d=l+h;if(typeof e.offsetX==="number"&&typeof e.offsetY==="number"){if(a){if(RG.ISOPERA){o=e.offsetX;u=e.offsetY}else if(RG.ISWEBKIT){o=e.offsetX-c-f;u=e.offsetY-h-l}else if(RG.ISIE){o=e.offsetX-c;u=e.offsetY-h}else{o=e.offsetX;u=e.offsetY}}else{if(!RG.ISIE&&!RG.ISOPERA){o=e.offsetX-f-c;u=e.offsetY-l-h}else if(RG.ISIE){o=e.offsetX-c;u=e.offsetY-h}else{o=e.offsetX;u=e.offsetY}}}else{if(typeof t.offsetParent!=="undefined"){do{i+=t.offsetLeft;s+=t.offsetTop}while(t=t.offsetParent)}o=e.pageX-i-p;u=e.pageY-s-d;o-=2*(parseInt(document.body.style.borderLeftWidth)||0);u-=2*(parseInt(document.body.style.borderTopWidth)||0)}return[o,u]};RG.getCanvasXY=function(e){var t=0;var n=0;var r=e;do{t+=r.offsetLeft;n+=r.offsetTop;if(r.tagName.toLowerCase()=="table"&&(RG.ISCHROME||RG.ISSAFARI)){t+=parseInt(r.border)||0;n+=parseInt(r.border)||0}r=r.offsetParent}while(r&&r.tagName.toLowerCase()!="body");var i=e.style.paddingLeft?parseInt(e.style.paddingLeft):0;var s=e.style.paddingTop?parseInt(e.style.paddingTop):0;var o=e.style.borderLeftWidth?parseInt(e.style.borderLeftWidth):0;var u=e.style.borderTopWidth?parseInt(e.style.borderTopWidth):0;if(navigator.userAgent.indexOf("Firefox")>0){t+=parseInt(document.body.style.borderLeftWidth)||0;n+=parseInt(document.body.style.borderTopWidth)||0}return[t+i+o,n+s+u]};RG.isFixed=function(e){var t=e;var n=0;while(t&&t.tagName.toLowerCase()!="body"&&n<99){if(t.style.position=="fixed"){return t}t=t.offsetParent}return false};RG.register=RG.Register=function(e){if(!e.Get("chart.noregister")){RGraph.ObjectRegistry.Add(e);e.Set("chart.noregister",true)}};RG.redraw=RG.Redraw=function(){var e=RGraph.ObjectRegistry.objects.byCanvasID;var t=document.getElementsByTagName("canvas");for(var n=0,r=t.length;n<r;++n){if(t[n].__object__&&t[n].__object__.isRGraph){if(!t[n].noclear){RGraph.clear(t[n],arguments[0]?arguments[0]:null)}}}for(var n=0,r=e.length;n<r;++n){if(e[n]){var i=e[n][0];e[n][1].Draw()}}};RG.redrawCanvas=RG.RedrawCanvas=function(e){var t=RG.ObjectRegistry.getObjectsByCanvasID(e.id);if(!arguments[1]||typeof arguments[1]==="boolean"&&!arguments[1]==false){var n=arguments[2]||e.__object__.get("clearto")||"transparent";RG.clear(e,n)}for(var r=0,i=t.length;r<i;++r){if(t[r]){if(t[r]&&t[r].isRGraph){t[r].Draw()}}}};RG.Background.draw=RG.background.draw=RG.background.Draw=function(e){var t=function(e,t,n){var r=t;var i=n;var s=e.properties;var o=0;var u=e.gutterLeft;var a=e.gutterRight;var f=e.gutterTop;var l=e.gutterBottom;var c=s["chart.variant"];i.fillStyle=s["chart.text.color"];if(c=="3d"){i.save();i.translate(10,-5)}if(typeof s["chart.title.xaxis"]==="string"&&s["chart.title.xaxis"].length){var h=s["chart.text.size"]+2;var p=s["chart.text.font"];var d=s["chart.title.xaxis.bold"];if(typeof s["chart.title.xaxis.size"]=="number"){h=s["chart.title.xaxis.size"]}if(typeof s["chart.title.xaxis.font"]=="string"){p=s["chart.title.xaxis.font"]}var v=(r.width-u-a)/2+u;var m=r.height-l+25;if(typeof s["chart.title.xaxis.pos"]==="number"){m=r.height-l*s["chart.title.xaxis.pos"]}if(typeof s["chart.title.xaxis.x"]==="number"){v=s["chart.title.xaxis.x"]}if(typeof s["chart.title.xaxis.y"]==="number"){m=s["chart.title.xaxis.y"]}RG.Text2(i,{font:p,size:h,x:v,y:m,text:s["chart.title.xaxis"],halign:"center",valign:"center",bold:d,tag:"title xaxis"})}if(typeof s["chart.title.yaxis"]=="string"&&s["chart.title.yaxis"].length){var h=s["chart.text.size"]+2;var p=s["chart.text.font"];var g=270;var d=s["chart.title.yaxis.bold"];var y=s["chart.title.yaxis.color"];if(typeof s["chart.title.yaxis.pos"]=="number"){var b=s["chart.title.yaxis.pos"]*u}else{var b=(u-25)/u*u}if(typeof s["chart.title.yaxis.size"]==="number"){h=s["chart.title.yaxis.size"]}if(typeof s["chart.title.yaxis.font"]==="string"){p=s["chart.title.yaxis.font"]}if(s["chart.title.yaxis.align"]=="right"||s["chart.title.yaxis.position"]=="right"||e.type==="hbar"&&s["chart.yaxispos"]==="right"&&typeof s["chart.title.yaxis.align"]==="undefined"&&typeof s["chart.title.yaxis.position"]==="undefined"){g=90;b=s["chart.title.yaxis.pos"]?r.width-a+s["chart.title.yaxis.pos"]*a:r.width-a+s["chart.text.size"]+5}else{b=b}var w=(r.height-f-l)/2+f;if(typeof s["chart.title.yaxis.x"]==="number"){b=s["chart.title.yaxis.x"]}if(typeof s["chart.title.yaxis.y"]==="number"){w=s["chart.title.yaxis.y"]}i.fillStyle=y;RG.text2(i,{font:p,size:h,x:b,y:w,valign:"center",halign:"center",angle:g,bold:d,text:s["chart.title.yaxis"],tag:"title yaxis"})}var E=s["chart.background.color"];if(E){i.fillStyle=E;i.fillRect(u+.5,f+.5,r.width-u-a,r.height-f-l)}var S=s["chart.ylabels.count"]||5;var T=(r.height-l-f)/S;i.beginPath();i.fillStyle=s["chart.background.barcolor1"];i.strokeStyle=i.fillStyle;o=r.height-l;for(var N=0;N<S;N+=2){i.rect(u,N*T+f,r.width-u-a,T)}i.fill();i.beginPath();i.fillStyle=s["chart.background.barcolor2"];i.strokeStyle=i.fillStyle;for(var N=1;N<S;N+=2){i.rect(u,N*T+f,r.width-u-a,T)}i.fill();if(s["chart.background.grid"]){if(s["chart.background.grid.autofit"]){if(s["chart.background.grid.autofit.align"]){e.Set("chart.background.grid.autofit.numhlines",s["chart.ylabels.count"]);if(e.type==="line"){if(s["chart.labels"]&&s["chart.labels"].length){e.Set("chart.background.grid.autofit.numvlines",s["chart.labels"].length-1)}else{e.Set("chart.background.grid.autofit.numvlines",e.data[0].length-1)}}else if((e.type==="bar"||e.type==="scatter")&&s["chart.labels"]&&s["chart.labels"].length){e.Set("chart.background.grid.autofit.numvlines",s["chart.labels"].length)}}var C=(r.width-u-a)/s["chart.background.grid.autofit.numvlines"];var k=(r.height-f-l)/s["chart.background.grid.autofit.numhlines"];e.Set("chart.background.grid.vsize",C);e.Set("chart.background.grid.hsize",k)}i.beginPath();i.lineWidth=s["chart.background.grid.width"]?s["chart.background.grid.width"]:1;i.strokeStyle=s["chart.background.grid.color"];if(s["chart.background.grid.dashed"]&&typeof i.setLineDash=="function"){i.setLineDash([3,2])}if(s["chart.background.grid.dotted"]&&typeof i.setLineDash=="function"){i.setLineDash([1,2])}i.beginPath();if(s["chart.background.grid.hlines"]){o=r.height-l;var k=s["chart.background.grid.hsize"];for(w=f;w<=o;w+=k){n.moveTo(u,ma.round(w));n.lineTo(r.width-a,ma.round(w))}}if(s["chart.background.grid.vlines"]){var L=r.width-a;var C=s["chart.background.grid.vsize"];for(x=u;x<=L;x+=C){i.moveTo(ma.round(x),f);i.lineTo(ma.round(x),r.height-l)}}if(s["chart.background.grid.border"]){i.strokeStyle=s["chart.background.grid.color"];i.strokeRect(ma.round(u),ma.round(f),r.width-u-a,r.height-f-l)}}i.stroke();i.beginPath();i.closePath();if(c=="3d"){i.restore()}if(typeof i.setLineDash=="function"){i.setLineDash([1,0])}if(typeof s["chart.title"]=="string"){if(e.type=="gantt"){f-=10}RG.DrawTitle(e,s["chart.title"],f,null,s["chart.title.size"]?s["chart.title.size"]:s["chart.text.size"]+2,{canvas:r,context:i})}i.stroke()};RG.ISOLD?t(e,e.canvas,e.context):RG.cachedDraw(e,e.uid+"_background",t)};RG.numberFormat=RG.number_format=function(e,t){var n=e.canvas;var r=e.context;var i=e.properties;var s;var o=arguments[2]?String(arguments[2]):"";var u=arguments[3]?String(arguments[3]):"";var a="";var f="";var l=typeof i["chart.scale.point"]=="string"?i["chart.scale.point"]:".";var c=typeof i["chart.scale.thousand"]=="string"?i["chart.scale.thousand"]:",";RegExp.$1="";var s,h;if(typeof i["chart.scale.formatter"]==="function"){return i["chart.scale.formatter"](e,t)}if(String(t).indexOf("e")>0){return String(o+String(t)+u)}t=String(t);if(t.indexOf(".")>0){var p=t;t=t.replace(/\.(.*)/,"");f=p.replace(/(.*)\.(.*)/,"$2")}var d=c;var v;for(s=t.length-1,h=0;s>=0;h++,s--){var m=t.charAt(s);if(h%3==0&&h!=0){a+=d}a+=m}var g=a;a="";for(s=g.length-1;s>=0;s--){a+=g.charAt(s)}if(a.indexOf("-"+i["chart.scale.thousand"])==0){a="-"+a.substr(("-"+i["chart.scale.thousand"]).length)}if(f.length){a=a+l+f;f="";RegExp.$1=""}if(a.charAt(0)=="-"){a=a.replace(/-/,"");o="-"+o}return o+a+u};RG.drawBars=RG.DrawBars=function(e){var t=e.properties;var n=e.context;var r=e.canvas;var s=t["chart.background.hbars"];if(s===null){return}n.beginPath();for(i=0,len=s.length;i<len;++i){var o=s[i][0];var u=s[i][1];var a=s[i][2];if(RG.is_null(o))o=e.scale2.max;if(o>e.scale2.max)o=e.scale2.max;if(RG.is_null(u))u=e.scale2.max-o;if(o+u>e.scale2.max)u=e.scale2.max-o;if(o+u<-1*e.scale2.max)u=-1*e.scale2.max-o;if(t["chart.xaxispos"]=="center"&&o==e.scale2.max&&u<e.scale2.max*-2){u=e.scale2.max*-2}var f=t["chart.gutter.left"];var l=e.getYCoord(o);var c=r.width-t["chart.gutter.left"]-t["chart.gutter.right"];var h=e.getYCoord(o+u)-l;if(RG.ISOPERA!=-1&&t["chart.xaxispos"]=="center"&&h<0){h*=-1;l=l-h}if(t["chart.xaxispos"]=="top"){l=r.height-l;h*=-1}n.fillStyle=a;n.fillRect(f,l,c,h)}};RG.drawInGraphLabels=RG.DrawInGraphLabels=function(e){var t=e.canvas;var n=e.context;var r=e.properties;var i=r["chart.labels.ingraph"];var s=[];var o="black";var u="white";var a=1;if(!i){return}for(var f=0,l=i.length;f<l;f+=1){if(typeof i[f]==="number"){for(var c=0;c<i[f];++c){s.push(null)}}else if(typeof i[f]==="string"||typeof i[f]==="object"){s.push(i[f])}else{s.push("")}}RG.NoShadow(e);if(s&&s.length>0){for(var f=0,l=s.length;f<l;f+=1){if(s[f]){var h=e.coords[f];if(h&&h.length>0){var p=e.type=="bar"?h[0]+h[2]/2:h[0];var d=e.type=="bar"?h[1]+h[3]/2:h[1];var v=typeof s[f][4]==="number"?s[f][4]:25;n.beginPath();n.fillStyle="black";n.strokeStyle="black";if(e.type==="bar"){if(e.Get("chart.xaxispos")=="top"){v*=-1}if(r["chart.variant"]=="dot"){n.moveTo(ma.round(p),e.coords[f][1]-5);n.lineTo(ma.round(p),e.coords[f][1]-5-v);var m=ma.round(p);var g=e.coords[f][1]-5-v}else if(r["chart.variant"]=="arrow"){n.moveTo(ma.round(p),e.coords[f][1]-5);n.lineTo(ma.round(p),e.coords[f][1]-5-v);var m=ma.round(p);var g=e.coords[f][1]-5-v}else{n.arc(ma.round(p),d,2.5,0,6.28,0);n.moveTo(ma.round(p),d);n.lineTo(ma.round(p),d-v);var m=ma.round(p);var g=d-v}n.stroke();n.fill()}else if(e.type=="line"){if(typeof s[f]=="object"&&typeof s[f][3]=="number"&&s[f][3]==-1){n.moveTo(ma.round(p),d+5);n.lineTo(ma.round(p),d+5+v);n.stroke();n.beginPath();n.moveTo(ma.round(p),d+5);n.lineTo(ma.round(p)-3,d+10);n.lineTo(ma.round(p)+3,d+10);n.closePath();var m=p;var g=d+5+v}else{var m=p;var g=d-5-v;n.moveTo(ma.round(p),d-5);n.lineTo(ma.round(p),d-5-v);n.stroke();n.beginPath();n.moveTo(ma.round(p),d-5);n.lineTo(ma.round(p)-3,d-10);n.lineTo(ma.round(p)+3,d-10);n.closePath()}n.fill()}n.beginPath();n.fillStyle=typeof s[f]==="object"&&typeof s[f][1]==="string"?s[f][1]:"black";RG.Text2(e,{font:r["chart.text.font"],size:r["chart.text.size"],x:m,y:g,text:typeof s[f]==="object"&&typeof s[f][0]==="string"?s[f][0]:s[f],valign:"bottom",halign:"center",bounding:true,"bounding.fill":typeof s[f]==="object"&&typeof s[f][2]==="string"?s[f][2]:"white",tag:"labels ingraph"});n.fill()}}}}};RG.fixEventObject=RG.FixEventObject=function(e){if(RG.ISOLD){var e=event;e.pageX=event.clientX+doc.body.scrollLeft;e.pageY=event.clientY+doc.body.scrollTop;e.target=event.srcElement;if(!doc.body.scrollTop&&doc.documentElement.scrollTop){e.pageX+=parseInt(doc.documentElement.scrollLeft);e.pageY+=parseInt(doc.documentElement.scrollTop)}}if(!e.stopPropagation){e.stopPropagation=function(){window.event.cancelBubble=true}}return e};RG.hideCrosshairCoords=RG.HideCrosshairCoords=function(){var e=RG.Registry.Get("chart.coordinates.coords.div");if(e&&e.style.opacity==1&&e.__object__.Get("chart.crosshairs.coords.fadeout")){var t=RG.Registry.Get("chart.coordinates.coords.div").style;setTimeout(function(){t.opacity=.9},25);setTimeout(function(){t.opacity=.8},50);setTimeout(function(){t.opacity=.7},75);setTimeout(function(){t.opacity=.6},100);setTimeout(function(){t.opacity=.5},125);setTimeout(function(){t.opacity=.4},150);setTimeout(function(){t.opacity=.3},175);setTimeout(function(){t.opacity=.2},200);setTimeout(function(){t.opacity=.1},225);setTimeout(function(){t.opacity=0},250);setTimeout(function(){t.display="none"},275)}};RG.draw3DAxes=RG.Draw3DAxes=function(e){var t=e.properties;var n=e.context;var r=e.canvas;var i=t["chart.gutter.left"];var s=t["chart.gutter.right"];var o=t["chart.gutter.top"];var u=t["chart.gutter.bottom"];n.strokeStyle="#aaa";n.fillStyle="#ddd";n.beginPath();n.moveTo(i,o);n.lineTo(i+10,o-5);n.lineTo(i+10,r.height-u-5);n.lineTo(i,r.height-u);n.moveTo(i,r.height-u);n.lineTo(i+10,r.height-u-5);n.lineTo(r.width-s+10,r.height-u-5);n.lineTo(r.width-s,r.height-u);n.closePath();n.stroke();n.fill()};RG.strokedCurvyRect=function(e,t,n,r,i){var s=arguments[5]?arguments[5]:3;var o=arguments[6]||arguments[6]==null?true:false;var u=arguments[7]||arguments[7]==null?true:false;var a=arguments[8]||arguments[8]==null?true:false;var f=arguments[9]||arguments[9]==null?true:false;e.beginPath();e.moveTo(t+(o?s:0),n);e.lineTo(t+r-(u?s:0),n);if(u){e.arc(t+r-s,n+s,s,RG.PI+RG.HALFPI,RG.TWOPI,false)}e.lineTo(t+r,n+i-(a?s:0));if(a){e.arc(t+r-s,n-s+i,s,RG.TWOPI,RG.HALFPI,false)}e.lineTo(t+(f?s:0),n+i);if(f){e.arc(t+s,n-s+i,s,RG.HALFPI,RG.PI,false)}e.lineTo(t,n+(o?s:0));if(o){e.arc(t+s,n+s,s,RG.PI,RG.PI+RG.HALFPI,false)}e.stroke()};RG.filledCurvyRect=function(e,t,n,r,i){var s=arguments[5]?arguments[5]:3;var o=arguments[6]||arguments[6]==null?true:false;var u=arguments[7]||arguments[7]==null?true:false;var a=arguments[8]||arguments[8]==null?true:false;var f=arguments[9]||arguments[9]==null?true:false;e.beginPath();if(o){e.moveTo(t+s,n+s);e.arc(t+s,n+s,s,RG.PI,RG.PI+RG.HALFPI,false)}else{e.fillRect(t,n,s,s)}if(u){e.moveTo(t+r-s,n+s);e.arc(t+r-s,n+s,s,RG.PI+RG.HALFPI,0,false)}else{e.moveTo(t+r-s,n);e.fillRect(t+r-s,n,s,s)}if(a){e.moveTo(t+r-s,n+i-s);e.arc(t+r-s,n-s+i,s,0,RG.HALFPI,false)}else{e.moveTo(t+r-s,n+i-s);e.fillRect(t+r-s,n+i-s,s,s)}if(f){e.moveTo(t+s,n+i-s);e.arc(t+s,n-s+i,s,RG.HALFPI,RG.PI,false)}else{e.moveTo(t,n+i-s);e.fillRect(t,n+i-s,s,s)}e.fillRect(t+s,n,r-s-s,i);e.fillRect(t,n+s,s+1,i-s-s);e.fillRect(t+r-s-1,n+s,s+1,i-s-s);e.fill()};RG.hideZoomedCanvas=RG.HideZoomedCanvas=function(){var e=10;var t=15;if(typeof RG.zoom_image==="object"){var n=RG.zoom_image.obj;var r=n.properties}else{return}if(r["chart.zoom.fade.out"]){for(var i=t,s=1;i>=0;--i,++s){if(typeof RG.zoom_image==="object"){setTimeout("RGraph.zoom_image.style.opacity = "+String(i/10),s*e)}}if(typeof RG.zoom_background==="object"){setTimeout("RGraph.zoom_background.style.opacity = "+String(i/t),s*e)}}if(typeof RG.zoom_image==="object"){setTimeout("RGraph.zoom_image.style.display = 'none'",r["chart.zoom.fade.out"]?t*e+10:0)}if(typeof RG.zoom_background==="object"){setTimeout("RGraph.zoom_background.style.display = 'none'",r["chart.zoom.fade.out"]?t*e+10:0)}};RG.addCustomEventListener=RG.AddCustomEventListener=function(e,t,n){var r=RGraph;if(typeof r.events[e.uid]==="undefined"){r.events[e.uid]=[]}r.events[e.uid].push([e,t,n]);return r.events[e.uid].length-1};RG.fireCustomEvent=RG.FireCustomEvent=function(e,t){if(e&&e.isRGraph){if(e[t]){e[t](e)}var n=e.uid;if(typeof n==="string"&&typeof RG.events==="object"&&typeof RG.events[n]==="object"&&RG.events[n].length>0){for(var r=0;r<RG.events[n].length;++r){if(RG.events[n][r]&&RG.events[n][r][1]==t){RG.events[n][r][2](e)}}}}};RGraph.removeAllCustomEventListeners=RGraph.RemoveAllCustomEventListeners=function(){var e=arguments[0];if(e&&RG.events[e]){RG.events[e]=[]}else{RG.events=[]}};RG.removeCustomEventListener=RG.RemoveCustomEventListener=function(e,t){if(typeof RG.events==="object"&&typeof RG.events[e.id]==="object"&&typeof RG.events[e.id][t]==="object"){RG.events[e.id][t]=null}};RG.drawBackgroundImage=RG.DrawBackgroundImage=function(e){var t=e.properties;var n=e.canvas;var r=e.context;if(typeof t["chart.background.image"]==="string"){if(typeof n.__rgraph_background_image__==="undefined"){var i=new Image;i.__object__=e;i.__canvas__=n;i.__context__=r;i.src=e.Get("chart.background.image");n.__rgraph_background_image__=i}else{i=n.__rgraph_background_image__}i.onload=function(){e.__rgraph_background_image_loaded__=true;RG.clear(n);RG.redrawCanvas(n)};var s=e.gutterLeft;var o=e.gutterRight;var u=e.gutterTop;var a=e.gutterBottom;var f=t["chart.background.image.stretch"];var l=t["chart.background.image.align"];if(typeof l==="string"){if(l.indexOf("right")!=-1){var c=n.width-(t["chart.background.image.w"]||i.width)-o}else{var c=s}if(l.indexOf("bottom")!=-1){var h=n.height-(t["chart.background.image.h"]||i.height)-a}else{var h=u}}else{var c=s||25;var h=u||25}var c=typeof t["chart.background.image.x"]==="number"?t["chart.background.image.x"]:c;var h=typeof t["chart.background.image.y"]==="number"?t["chart.background.image.y"]:h;var p=f?n.width-s-o:i.width;var d=f?n.height-u-a:i.height;if(typeof t["chart.background.image.w"]==="number")p=t["chart.background.image.w"];if(typeof t["chart.background.image.h"]==="number")d=t["chart.background.image.h"];var v=r.globalAlpha;r.globalAlpha=t["chart.background.image.alpha"];r.drawImage(i,c,h,p,d);r.globalAlpha=v}};RG.hasTooltips=function(e){var t=e.properties;if(typeof t["chart.tooltips"]=="object"&&t["chart.tooltips"]){for(var n=0,r=t["chart.tooltips"].length;n<r;++n){if(!RG.is_null(e.Get("chart.tooltips")[n])){return true}}}else if(typeof t["chart.tooltips"]==="function"){return true}return false};RG.createUID=RG.CreateUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=ma.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)})};RG.ObjectRegistry.add=RG.ObjectRegistry.Add=function(e){var t=e.uid;var n=e.canvas.id;RG.ObjectRegistry.objects.byUID.push([t,e]);RG.ObjectRegistry.objects.byCanvasID.push([n,e])};RG.ObjectRegistry.remove=RG.ObjectRegistry.Remove=function(e){var t=e.id;var n=e.uid;for(var r=0;r<RG.ObjectRegistry.objects.byUID.length;++r){if(RG.ObjectRegistry.objects.byUID[r]&&RG.ObjectRegistry.objects.byUID[r][1].uid==n){RG.ObjectRegistry.objects.byUID[r]=null}}for(var r=0;r<RG.ObjectRegistry.objects.byCanvasID.length;++r){if(RG.ObjectRegistry.objects.byCanvasID[r]&&RG.ObjectRegistry.objects.byCanvasID[r][1]&&RG.ObjectRegistry.objects.byCanvasID[r][1].uid==n){RG.ObjectRegistry.objects.byCanvasID[r]=null}}};RG.ObjectRegistry.clear=RG.ObjectRegistry.Clear=function(){if(arguments[0]){var e=typeof arguments[0]==="object"?arguments[0].id:arguments[0];var t=RG.ObjectRegistry.getObjectsByCanvasID(e);for(var n=0,r=t.length;n<r;++n){RG.ObjectRegistry.remove(t[n])}}else{RG.ObjectRegistry.objects={};RG.ObjectRegistry.objects.byUID=[];RG.ObjectRegistry.objects.byCanvasID=[]}};RGraph.ObjectRegistry.list=RGraph.ObjectRegistry.List=function(){var e=[];for(var t=0,n=RG.ObjectRegistry.objects.byUID.length;t<n;++t){if(RG.ObjectRegistry.objects.byUID[t]){e.push(RG.ObjectRegistry.objects.byUID[t][1].type)}}if(arguments[0]){return e}else{p(e)}};RG.ObjectRegistry.clearByType=RG.ObjectRegistry.ClearByType=function(e){var t=RG.ObjectRegistry.objects.byUID;for(var n=0,r=t.length;n<r;++n){if(t[n]){var i=t[n][0];var s=t[n][1];if(s&&s.type==e){RG.ObjectRegistry.remove(s)}}}};RG.ObjectRegistry.iterate=RG.ObjectRegistry.Iterate=function(e){var t=RGraph.ObjectRegistry.objects.byUID;for(var n=0,r=t.length;n<r;++n){if(typeof arguments[1]==="string"){var i=arguments[1].split(/,/);for(var s=0,o=i.length;s<o;++s){if(i[s]==t[n][1].type){e(t[n][1])}}}else{e(t[n][1])}}};RG.ObjectRegistry.getObjectsByCanvasID=function(e){var t=RG.ObjectRegistry.objects.byCanvasID;var n=[];for(var r=0,i=t.length;r<i;++r){if(t[r]&&t[r][0]==e){n.push(t[r][1])}}return n};RG.ObjectRegistry.getFirstObjectByXY=RG.ObjectRegistry.getObjectByXY=function(e){var t=e.target;var n=null;var r=RG.ObjectRegistry.getObjectsByCanvasID(t.id);for(var i=r.length-1;i>=0;--i){var s=r[i].getObjectByXY(e);if(s){return s}}};RG.ObjectRegistry.getObjectsByXY=function(e){var t=e.target;var n=[];var r=RG.ObjectRegistry.getObjectsByCanvasID(t.id);for(var i=r.length-1;i>=0;--i){var s=r[i].getObjectByXY(e);if(s){n.push(s)}}return n};RG.ObjectRegistry.getObjectByUID=function(e){var t=RG.ObjectRegistry.objects.byUID;for(var n=0,r=t.length;n<r;++n){if(t[n]&&t[n][1].uid==e){return t[n][1]}}};RG.ObjectRegistry.bringToFront=function(e){var t=typeof arguments[1]==="undefined"?true:arguments[1];RG.ObjectRegistry.remove(e);RG.ObjectRegistry.add(e);if(t){RG.redrawCanvas(e.canvas)}};RG.ObjectRegistry.getObjectsByType=function(e){var t=RG.ObjectRegistry.objects.byUID;var n=[];for(var r=0,i=t.length;r<i;++r){if(t[r]&&t[r][1]&&t[r][1].type&&t[r][1].type&&t[r][1].type==e){n.push(t[r][1])}}return n};RG.ObjectRegistry.getFirstObjectByType=function(e){var t=RG.ObjectRegistry.objects.byUID;for(var n=0,r=t.length;n<r;++n){if(t[n]&&t[n][1]&&t[n][1].type==e){return t[n][1]}}return null};RG.getAngleByXY=function(e,t,n,r){var i=ma.atan((r-t)/(n-e));i=ma.abs(i);if(n>=e&&r>=t){i+=RG.TWOPI}else if(n>=e&&r<t){i=RG.HALFPI-i+(RG.PI+RG.HALFPI)}else if(n<e&&r<t){i+=RG.PI}else{i=RG.PI-i}if(i>RG.TWOPI){i-=RG.TWOPI}return i};RG.getHypLength=function(e,t,n,r){var i=ma.sqrt((n-e)*(n-e)+(r-t)*(r-t));return i};RG.getRadiusEndPoint=function(e,t,n,r){var i=e+ma.cos(n)*r;var s=t+ma.sin(n)*r;return[i,s]};RG.installEventListeners=RG.InstallEventListeners=function(e){var t=e.properties;if(RG.ISOLD){return}if(RG.installCanvasClickListener){RG.installWindowMousedownListener(e);RG.installWindowMouseupListener(e);RG.installCanvasMousemoveListener(e);RG.installCanvasMouseupListener(e);RG.installCanvasMousedownListener(e);RG.installCanvasClickListener(e)}else if(RG.hasTooltips(e)||t["chart.adjustable"]||t["chart.annotatable"]||t["chart.contextmenu"]||t["chart.resizable"]||t["chart.key.interactive"]||t["chart.events.click"]||t["chart.events.mousemove"]||typeof e.onclick==="function"||typeof e.onmousemove==="function"){alert("[RGRAPH] You appear to have used dynamic features but not included the file: RGraph.common.dynamic.js")}};RG.pr=function(e){var t=arguments[2]?arguments[2]:"    ";var n="";var r=typeof arguments[3]=="number"?arguments[3]:0;if(r>=5){return""}switch(typeof e){case"string":n+=e+" ("+typeof e+", "+e.length+")";break;case"number":n+=e+" ("+typeof e+")";break;case"boolean":n+=e+" ("+typeof e+")";break;case"function":n+="function () {}";break;case"undefined":n+="undefined";break;case"null":n+="null";break;case"object":if(RGraph.is_null(e)){n+=t+"null\n"}else{n+=t+"Object {"+"\n";for(j in e){n+=t+"    "+j+" => "+RGraph.pr(e[j],true,t+"    ",r+1)+"\n"}n+=t+"}"}break;default:n+="Unknown type: "+typeof e+"";break}if(!arguments[1]){alert(n)}return n};RG.dashedLine=RG.DashedLine=function(e,t,n,r,i){var s=5;if(typeof arguments[5]==="number"){s=arguments[5]}var o=r-t;var u=i-n;var a=ma.floor(ma.sqrt(o*o+u*u)/s);var f=o/a;var l=u/a;var c=0;do{c%2==0&&c>0?e.lineTo(t,n):e.moveTo(t,n);t+=f;n+=l}while(c++<=a)};RG.AJAX=function(e,t){if(window.XMLHttpRequest){var n=new XMLHttpRequest}else if(window.ActiveXObject){var n=new ActiveXObject("Microsoft.XMLHTTP")}n.onreadystatechange=function(){if(this.readyState==4&&this.status==200){this.__user_callback__=t;this.__user_callback__(this.responseText)}};n.open("GET",e,true);n.send()};RG.AJAX.POST=function(e,t,n){var r=[];if(window.XMLHttpRequest){var s=new XMLHttpRequest}else if(window.ActiveXObject){var s=new ActiveXObject("Microsoft.XMLHTTP")}s.onreadystatechange=function(){if(this.readyState==4&&this.status==200){this.__user_callback__=n;this.__user_callback__(this.responseText)}};s.open("POST",e,true);s.setRequestHeader("Content-type","application/x-www-form-urlencoded");for(i in t){if(typeof i=="string"){r.push(i+"="+encodeURIComponent(t[i]))}}s.send(r.join("&"))};RG.AJAX.getNumber=function(e,t){RG.AJAX(e,function(){var e=parseFloat(this.responseText);t(e)})};RG.AJAX.getString=function(e,t){RG.AJAX(e,function(){var e=String(this.responseText);t(e)})};RG.AJAX.getJSON=function(url,callback){RG.AJAX(url,function(){var json=eval("("+this.responseText+")");callback(json)})};RG.AJAX.getCSV=function(e,t){var n=arguments[2]?arguments[2]:",";RG.AJAX(e,function(){var e=new RegExp(n);var r=this.responseText.split(e);for(var i=0,s=r.length;i<s;++i){r[i]=parseFloat(r[i])}t(r)})};RG.rotateCanvas=RG.RotateCanvas=function(e,t,n,r){var i=e.getContext("2d");i.translate(t,n);i.rotate(r);i.translate(0-t,0-n)};RG.measureText=RG.MeasureText=function(e,t,n,r){if(typeof RGraph.measuretext_cache==="undefined"){RGraph.measuretext_cache=[]}var i=e+":"+t+":"+n+":"+r;if(typeof RGraph.measuretext_cache=="object"&&RGraph.measuretext_cache[i]){return RGraph.measuretext_cache[i]}if(!RGraph.measuretext_cache["text-div"]){var s=document.createElement("DIV");s.style.position="absolute";s.style.top="-100px";s.style.left="-100px";document.body.appendChild(s);RGraph.measuretext_cache["text-div"]=s}else if(RGraph.measuretext_cache["text-div"]){var s=RGraph.measuretext_cache["text-div"]}s.innerHTML=e.replace(/\r\n/g,"<br />");s.style.fontFamily=n;s.style.fontWeight=t?"bold":"normal";s.style.fontSize=(r||12)+"pt";var r=[s.offsetWidth,s.offsetHeight];RGraph.measuretext_cache[i]=r;return r};RG.text2=RG.Text2=function(e,t){if(e&&e.isRGraph){var n=e.context;var r=e.canvas}else if(typeof e=="string"){var r=document.getElementById(e);var n=r.getContext("2d")}else if(typeof e.getContext==="function"){var r=e;var n=r.getContext("2d")}else if(e.toString().indexOf("CanvasRenderingContext2D")!=-1||RGraph.ISIE8&&e.moveTo){var n=e;var r=e.canvas}else if(RG.ISOLD&&e.fillText){var n=e;var r=e.canvas}var i=t.x;var s=t.y;var o=i;var u=s;var a=t.text;var f=a.split(/\r?\n/g);var l=f.length;var c=t.font?t.font:"Arial";var h=t.size?t.size:10;var p=h*1.5;var d=t.bold;var v=t.italic;var m=t.halign?t.halign:"left";var g=t.valign?t.valign:"bottom";var y=typeof t.tag=="string"&&t.tag.length>0?t.tag:"";var b=t.marker;var w=t.angle||0;if(typeof t.boundingFill==="string")t["bounding.fill"]=t.boundingFill;if(typeof t.boundingStroke==="string")t["bounding.stroke"]=t.boundingStroke;var E=t.bounding;var S=t["bounding.stroke"]?t["bounding.stroke"]:"black";var x=t["bounding.fill"]?t["bounding.fill"]:"rgba(255,255,255,0.7)";var T=t["bounding.shadow"];var N=t["bounding.shadow.color"]||"#ccc";var C=t["bounding.shadow.blur"]||3;var k=t["bounding.shadow.offsetx"]||3;var L=t["bounding.shadow.offsety"]||3;var A=t["bounding.linewidth"]||1;var O={};if(typeof a=="number"){a=String(a)}if(typeof a!="string"){alert("[RGRAPH TEXT] The text given must a string or a number");return}if(w!=0){n.save();n.translate(i,s);n.rotate(ma.PI/180*w);i=0;s=0}n.font=(t.italic?"italic ":"")+(t.bold?"bold ":"")+h+"pt "+c;var M=0;for(var _=0;_<l;++_){M=ma.max(M,n.measureText(f[_]).width)}var D=p*l;if(t.marker){var P=10;var H=n.strokeStyle;n.beginPath();n.strokeStyle="red";n.moveTo(i,s-P);n.lineTo(i,s+P);n.moveTo(i-P,s);n.lineTo(i+P,s);n.stroke();n.strokeStyle=H}if(m=="center"){n.textAlign="center";var B=i-2-M/2}else if(m=="right"){n.textAlign="right";var B=i-2-M}else{n.textAlign="left";var B=i-2}if(g=="center"){n.textBaseline="middle";s-=1;s-=(l-1)/2*p;var j=s-p/2-2}else if(g=="top"){n.textBaseline="top";var j=s-2}else{n.textBaseline="bottom";if(l>1){s-=(l-1)*p}var j=s-p-2}var F=M+4;var I=D+4;if(E){var q=n.lineWidth;var R=n.strokeStyle;var U=n.fillStyle;var z=n.shadowColor;var W=n.shadowBlur;var X=n.shadowOffsetX;var V=n.shadowOffsetY;n.lineWidth=A;n.strokeStyle=S;n.fillStyle=x;if(T){n.shadowColor=N;n.shadowBlur=C;n.shadowOffsetX=k;n.shadowOffsetY=L}n.strokeRect(B,j,F,I);n.fillRect(B,j,F,I);n.lineWidth=q;n.strokeStyle=R;n.fillStyle=U;n.shadowColor=z;n.shadowBlur=W;n.shadowOffsetX=X;n.shadowOffsetY=V}if(l>1){for(var _=0;_<l;++_){n.fillText(f[_],i,s+p*_)}}else{n.fillText(a,i,s)}if(w!=0){if(w==90){if(m=="left"){if(g=="bottom"){B=o-2;j=u-2;F=D+4;I=M+4}if(g=="center"){B=o-D/2-2;j=u-2;F=D+4;I=M+4}if(g=="top"){B=o-D-2;j=u-2;F=D+4;I=M+4}}else if(m=="center"){if(g=="bottom"){B=o-2;j=u-M/2-2;F=D+4;I=M+4}if(g=="center"){B=o-D/2-2;j=u-M/2-2;F=D+4;I=M+4}if(g=="top"){B=o-D-2;j=u-M/2-2;F=D+4;I=M+4}}else if(m=="right"){if(g=="bottom"){B=o-2;j=u-M-2;F=D+4;I=M+4}if(g=="center"){B=o-D/2-2;j=u-M-2;F=D+4;I=M+4}if(g=="top"){B=o-D-2;j=u-M-2;F=D+4;I=M+4}}}else if(w==180){if(m=="left"){if(g=="bottom"){B=o-M-2;j=u-2;F=M+4;I=D+4}if(g=="center"){B=o-M-2;j=u-D/2-2;F=M+4;I=D+4}if(g=="top"){B=o-M-2;j=u-D-2;F=M+4;I=D+4}}else if(m=="center"){if(g=="bottom"){B=o-M/2-2;j=u-2;F=M+4;I=D+4}if(g=="center"){B=o-M/2-2;j=u-D/2-2;F=M+4;I=D+4}if(g=="top"){B=o-M/2-2;j=u-D-2;F=M+4;I=D+4}}else if(m=="right"){if(g=="bottom"){B=o-2;j=u-2;F=M+4;I=D+4}if(g=="center"){B=o-2;j=u-D/2-2;F=M+4;I=D+4}if(g=="top"){B=o-2;j=u-D-2;F=M+4;I=D+4}}}else if(w==270){if(m=="left"){if(g=="bottom"){B=o-D-2;j=u-M-2;F=D+4;I=M+4}if(g=="center"){B=o-D/2-4;j=u-M-2;F=D+4;I=M+4}if(g=="top"){B=o-2;j=u-M-2;F=D+4;I=M+4}}else if(m=="center"){if(g=="bottom"){B=o-D-2;j=u-M/2-2;F=D+4;I=M+4}if(g=="center"){B=o-D/2-4;j=u-M/2-2;F=D+4;I=M+4}if(g=="top"){B=o-2;j=u-M/2-2;F=D+4;I=M+4}}else if(m=="right"){if(g=="bottom"){B=o-D-2;j=u-2;F=D+4;I=M+4}if(g=="center"){B=o-D/2-2;j=u-2;F=D+4;I=M+4}if(g=="top"){B=o-2;j=u-2;F=D+4;I=M+4}}}n.restore()}n.textBaseline="alphabetic";n.textAlign="left";O.x=B;O.y=j;O.width=F;O.height=I;O.object=e;O.text=a;O.tag=y;if(e&&e.isRGraph&&e.coordsText){e.coordsText.push(O)}return O};RG.sequentialIndexToGrouped=function(e,t){var n=0;var r=0;while(--e>=0){if(RG.is_null(t[n])){n++;r=0;continue}if(typeof t[n]=="number"){n++;r=0;continue}r++;if(r>=t[n].length){n++;r=0}}return[n,r]};RG.Highlight.rect=RG.Highlight.Rect=function(e,t){var n=e.canvas;var r=e.context;var i=e.properties;if(i["chart.tooltips.highlight"]){r.lineWidth=1;r.beginPath();r.strokeStyle=i["chart.highlight.stroke"];r.fillStyle=i["chart.highlight.fill"];r.rect(t["x"],t["y"],t["width"],t["height"]);r.stroke();r.fill()}};RG.Highlight.point=RG.Highlight.Point=function(e,t){var n=e.properties;var r=e.canvas;var i=e.context;if(n["chart.tooltips.highlight"]){i.beginPath();i.strokeStyle=n["chart.highlight.stroke"];i.fillStyle=n["chart.highlight.fill"];var s=n["chart.highlight.point.radius"]||2;i.arc(t["x"],t["y"],s,0,RG.TWOPI,0);i.stroke();i.fill()}};RG.parseDate=function(e){e=RG.trim(e);if(e==="now"){e=(new Date).toString()}if(e.match(/^(\d\d\d\d)(-|\/)(\d\d)(-|\/)(\d\d)( |T)(\d\d):(\d\d):(\d\d)$/)){e=RegExp.$1+"-"+RegExp.$3+"-"+RegExp.$5+"T"+RegExp.$7+":"+RegExp.$8+":"+RegExp.$9}if(e.match(/^\d\d\d\d-\d\d-\d\d$/)){e=e.replace(/-/g,"/")}if(e.match(/^\d\d:\d\d:\d\d$/)){var t=new Date;var n=t.getDate();var r=t.getMonth()+1;var i=t.getFullYear();if(String(r).length===1)r="0"+r;if(String(n).length===1)n="0"+n;e=i+"/"+r+"/"+n+" "+e}return Date.parse(e)};RG.resetColorsToOriginalValues=function(e){if(e.original_colors){for(var t in e.original_colors){if(typeof t==="string"&&t.substr(0,6)==="chart."){e.properties[t]=RG.arrayClone(e.original_colors[t])}}}if(typeof e.resetColorsToOriginalValues==="function"){e.resetColorsToOriginalValues()}e.colorsParsed=false};RG.path=RG.Path=function(e,t){if(e.isRGraph&&typeof e.type==="string"){var n=e.context}else{var n=e}if(typeof t=="string"){t=t.split(/ +/)}for(var r=0,i=t.length;r<i;r+=1){var s=t[r];switch(s){case"b":n.beginPath();break;case"c":n.closePath();break;case"m":n.moveTo(parseFloat(t[r+1]),parseFloat(t[r+2]));r+=2;break;case"l":n.lineTo(parseFloat(t[r+1]),parseFloat(t[r+2]));r+=2;break;case"s":n.strokeStyle=t[r+1];n.stroke();r+=1;break;case"f":n.fillStyle=t[r+1];n.fill();r+=1;break;case"qc":n.quadraticCurveTo(parseFloat(t[r+1]),parseFloat(t[r+2]),parseFloat(t[r+3]),parseFloat(t[r+4]));r+=4;break;case"bc":n.bezierCurveTo(parseFloat(t[r+1]),parseFloat(t[r+2]),parseFloat(t[r+3]),parseFloat(t[r+4]),parseFloat(t[r+5]),parseFloat(t[r+6]));r+=6;break;case"r":n.rect(parseFloat(t[r+1]),parseFloat(t[r+2]),parseFloat(t[r+3]),parseFloat(t[r+4]));r+=4;break;case"a":n.arc(parseFloat(t[r+1]),parseFloat(t[r+2]),parseFloat(t[r+3]),parseFloat(t[r+4]),parseFloat(t[r+5]),t[r+6]==="true"||t[r+6]===true?true:false);r+=6;break;case"at":n.arcTo(parseFloat(t[r+1]),parseFloat(t[r+2]),parseFloat(t[r+3]),parseFloat(t[r+4]),parseFloat(t[r+5]));r+=5;break;case"lw":n.lineWidth=parseFloat(t[r+1]);r+=1;break;case"lj":n.lineJoin=t[r+1];r+=1;break;case"lc":n.lineCap=t[r+1];r+=1;break;case"sc":n.shadowColor=t[r+1];r+=1;break;case"sb":n.shadowBlur=parseFloat(t[r+1]);r+=1;break;case"sx":n.shadowOffsetX=parseFloat(t[r+1]);r+=1;break;case"sy":n.shadowOffsetY=parseFloat(t[r+1]);r+=1;break;case"fu":t[r+1](e);r+=1;break}}};RG.linearGradient=RG.LinearGradient=function(e,t,n,r,i,s,o){var u=e.context.createLinearGradient(t,n,r,i);var a=arguments.length-5;for(var f=5;f<arguments.length;++f){var l=arguments[f];var c=(f-5)/(a-1);u.addColorStop(c,l)}return u};RG.radialGradient=RG.RadialGradient=function(e,t,n,r,i,s,o,u,a){var f=e.context.createRadialGradient(t,n,r,i,s,o);var l=arguments.length-7;for(var c=7;c<arguments.length;++c){var h=arguments[c];var p=(c-7)/(l-1);f.addColorStop(p,h)}return f};RG.addEventListener=RG.AddEventListener=function(e,t,n){var r=arguments[3]?arguments[3]:"unknown";RG.Registry.get("chart.event.handlers").push([e,t,n,r])};RG.clearEventListeners=RG.ClearEventListeners=function(e){if(e&&e=="window"){window.removeEventListener("mousedown",window.__rgraph_mousedown_event_listener_installed__,false);window.removeEventListener("mouseup",window.__rgraph_mouseup_event_listener_installed__,false)}else{var t=document.getElementById(e);t.removeEventListener("mouseup",t.__rgraph_mouseup_event_listener_installed__,false);t.removeEventListener("mousemove",t.__rgraph_mousemove_event_listener_installed__,false);t.removeEventListener("mousedown",t.__rgraph_mousedown_event_listener_installed__,false);t.removeEventListener("click",t.__rgraph_click_event_listener_installed__,false)}};RG.hidePalette=RG.HidePalette=function(){var e=RG.Registry.get("palette");if(typeof e=="object"&&e){e.style.visibility="hidden";e.style.display="none";RG.Registry.set("palette",null)}};RG.random=function(e,t){var n=arguments[2]?arguments[2]:0;var r=ma.random();return Number(((t-e)*r+e).toFixed(n))};RG.random.array=function(e,t,n){var r=[];for(var i=0;i<e;i+=1){r.push(RG.random(t,n))}return r};RG.noShadow=RG.NoShadow=function(e){var t=e.context;t.shadowColor="rgba(0,0,0,0)";t.shadowBlur=0;t.shadowOffsetX=0;t.shadowOffsetY=0};RG.setShadow=RG.SetShadow=function(e,t,n,r,i){var s=e.context;s.shadowColor=t;s.shadowOffsetX=n;s.shadowOffsetY=r;s.shadowBlur=i};RG.Registry.set=RG.Registry.Set=function(e,t){RG.Registry.store[e]=t;return t};RG.Registry.get=RG.Registry.Get=function(e){return RG.Registry.store[e]};RG.degrees2Radians=function(e){return e*(RG.PI/180)};RG.log=function(e,t){return ma.log(e)/(t?ma.log(t):1)};RG.isArray=RG.is_array=function(e){return e!=null&&e.constructor.toString().indexOf("Array")!=-1};RG.trim=function(e){return RG.ltrim(RG.rtrim(e))};RG.ltrim=function(e){return e.replace(/^(\s|\0)+/,"")};RG.rtrim=function(e){return e.replace(/(\s|\0)+$/,"")};RG.isNull=RG.is_null=function(e){if(e==null||typeof e==="object"&&!e){return true}return false};RG.async=RG.Async=function(e){return setTimeout(e,arguments[1]?arguments[1]:1)};RG.reset=RG.Reset=function(e){e.width=e.width;RG.ObjectRegistry.clear(e);e.__rgraph_aa_translated__=false};RG.getCanvasTag=function(e){e=typeof e==="object"?e.id:e;var t=doc.getElementById(e);return[e,t]};RG.Effects.updateCanvas=RG.Effects.UpdateCanvas=function(e){win.requestAnimationFrame=win.requestAnimationFrame||win.webkitRequestAnimationFrame||win.msRequestAnimationFrame||win.mozRequestAnimationFrame||function(e){setTimeout(e,16.666)};win.requestAnimationFrame(e)};RG.Effects.getEasingMultiplier=function(e,t){return ma.pow(ma.sin(t/e*RG.HALFPI),3)};RG.stringsToNumbers=function(e){var t=arguments[1]||",";if(typeof e==="number"){return e}if(typeof e==="string"){if(e.indexOf(t)!=-1){e=e.split(t)}else{e=parseFloat(e)}}if(typeof e==="object"){for(var n=0,r=e.length;n<r;n+=1){e[n]=parseFloat(e[n])}}return e};RG.cachedDraw=function(e,t,n){if(!RG.cache[t]){RG.cache[t]={};RG.cache[t].object=e;RG.cache[t].canvas=jQuery("<canvas></canvas>").attr({width:e.canvas.width,height:e.canvas.height,id:"background_cached_canvas"+e.canvas.id}).get(0);if(typeof G_vmlCanvasManager==="object"&&G_vmlCanvasManager.initElement){G_vmlCanvasManager.initElement(RG.cache[t].canvas)}RG.cache[t].context=RG.cache[t].canvas.getContext("2d");RG.cache[t].context.translate(.5,.5);n(e,RG.cache[t].canvas,RG.cache[t].context)}e.context.drawImage(RG.cache[t].canvas,-.5,-.5)};RG.parseObjectStyleConfig=function(e,t){var n=function(e,t,r,i){var s;for(key in t){var o=false;var u=false;var a=t[key];if(!RG.isNull(a)&&a.constructor){o=a.constructor.toString().indexOf("Object")>0;u=a.constructor.toString().indexOf("Array")>0}if(o&&!u){n(e,t[key],r+"."+key,i)}else if(key==="self"){i[r]=a}else{i[r+"."+key]=a}}return i};var r=n(e,t,"chart",{});for(key in r){if(typeof key==="string"){e.set(key,r[key])}}}})(window,document);window.$p=function(e){RGraph.pr(arguments[0],arguments[1],arguments[3])};window.$a=function(e){alert(e)};window.$cl=function(e){return console.log(e)};RGraph=window.RGraph||{isRGraph:true};RGraph.Effects=RGraph.Effects||{};RGraph.Effects.Rose=RGraph.Effects.Rose||{};RGraph.Rose=function(e){if(typeof e==="object"&&typeof e.data==="object"&&typeof e.id==="string"){var t=true}else{var e={id:e};e.data=arguments[1]}this.id=e.id;this.canvas=document.getElementById(this.id);this.context=this.canvas.getContext?this.canvas.getContext("2d"):null;this.data=e.data;this.canvas.__object__=this;this.type="rose";this.isRGraph=true;this.uid=RGraph.CreateUID();this.canvas.uid=this.canvas.uid?this.canvas.uid:RGraph.CreateUID();this.colorsParsed=false;this.coordsText=[];this.original_colors=[];this.firstDraw=true;this.centerx=0;this.centery=0;this.radius=0;this.max=0;this.angles=[];this.angles2=[];this.properties={"chart.background.axes":true,"chart.background.axes.color":"black","chart.background.grid":true,"chart.background.grid.color":"#ccc","chart.background.grid.size":null,"chart.background.grid.spokes":null,"chart.background.grid.count":5,"chart.centerx":null,"chart.centery":null,"chart.radius":null,"chart.angles.start":0,"chart.colors":["rgba(255,0,0,0.5)","rgba(255,255,0,0.5)","rgba(0,255,255,0.5)","rgb(0,255,0)","gray","blue","rgb(255,128,255)","green","pink","gray","aqua"],"chart.linewidth":1,"chart.colors.sequential":false,"chart.colors.alpha":null,"chart.margin":0,"chart.strokestyle":"#aaa","chart.gutter.left":25,"chart.gutter.right":25,"chart.gutter.top":25,"chart.gutter.bottom":25,"chart.title":"","chart.title.background":null,"chart.title.hpos":null,"chart.title.vpos":null,"chart.title.bold":true,"chart.title.font":null,"chart.title.x":null,"chart.title.y":null,"chart.title.halign":null,"chart.title.valign":null,"chart.labels":null,"chart.labels.position":"center","chart.labels.axes":"nsew","chart.labels.boxed":true,"chart.labels.offset":0,"chart.text.color":"black","chart.text.font":"Arial","chart.text.size":10,"chart.key":null,"chart.key.background":"white","chart.key.position":"graph","chart.key.halign":"right","chart.key.shadow":false,"chart.key.shadow.color":"#666","chart.key.shadow.blur":3,"chart.key.shadow.offsetx":2,"chart.key.shadow.offsety":2,"chart.key.position.gutter.boxed":false,"chart.key.position.x":null,"chart.key.position.y":null,"chart.key.color.shape":"square","chart.key.rounded":true,"chart.key.linewidth":1,"chart.key.colors":null,"chart.key.interactive":false,"chart.key.interactive.highlight.chart.stroke":"black","chart.key.interactive.highlight.chart.fill":"rgba(255,255,255,0.7)","chart.key.interactive.highlight.label":"rgba(255,0,0,0.2)","chart.key.text.color":"black","chart.contextmenu":null,"chart.tooltips":null,"chart.tooltips.event":"onclick","chart.tooltips.effect":"fade","chart.tooltips.css.class":"RGraph_tooltip","chart.tooltips.highlight":true,"chart.highlight.stroke":"rgba(0,0,0,0)","chart.highlight.fill":"rgba(255,255,255,0.7)","chart.annotatable":false,"chart.annotate.color":"black","chart.zoom.factor":1.5,"chart.zoom.fade.in":true,"chart.zoom.fade.out":true,"chart.zoom.hdir":"right","chart.zoom.vdir":"down","chart.zoom.frames":25,"chart.zoom.delay":16.666,"chart.zoom.shadow":true,"chart.zoom.background":true,"chart.zoom.action":"zoom","chart.resizable":false,"chart.resize.handle.adjust":[0,0],"chart.resize.handle.background":null,"chart.adjustable":false,"chart.ymax":null,"chart.ymin":0,"chart.scale.decimals":null,"chart.scale.point":".","chart.scale.thousand":",","chart.variant":"stacked","chart.exploded":0,"chart.events.mousemove":null,"chart.events.click":null,"chart.animation.roundrobin.factor":1,"chart.animation.roundrobin.radius":true,"chart.animation.grow.multiplier":1,"chart.labels.count":5};var n=RGraph.array_linearize(this.data);for(var r=0;r<n.length;++r){this["$"+r]={}}if(!this.canvas.__rgraph_aa_translated__){this.context.translate(.5,.5);this.canvas.__rgraph_aa_translated__=true}var i=RGraph;var s=this.canvas;var o=s.getContext("2d");var u=this.properties;var a=jQuery;var f=i.Path;var l=window;var c=document;var h=Math;if(i.Effects&&typeof i.Effects.decorate==="function"){i.Effects.decorate(this)}this.set=this.Set=function(e){var t=typeof arguments[1]==="undefined"?null:arguments[1];if(arguments.length===1&&typeof e==="object"){i.parseObjectStyleConfig(this,e);return this}if(e.substr(0,6)!="chart."){e="chart."+e}u[e.toLowerCase()]=t;return this};this.get=this.Get=function(e){if(e.substr(0,6)!="chart."){e="chart."+e}return u[e.toLowerCase()]};this.draw=this.Draw=function(){i.FireCustomEvent(this,"onbeforedraw");this.gutterLeft=u["chart.gutter.left"];this.gutterRight=u["chart.gutter.right"];this.gutterTop=u["chart.gutter.top"];this.gutterBottom=u["chart.gutter.bottom"];this.radius=Math.min(s.width-this.gutterLeft-this.gutterRight,s.height-this.gutterTop-this.gutterBottom)/2;this.centerx=(s.width-this.gutterLeft-this.gutterRight)/2+this.gutterLeft;this.centery=(s.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop;this.angles=[];this.angles2=[];this.total=0;this.startRadians=u["chart.angles.start"];this.coordsText=[];if(u["chart.key"]&&u["chart.key"].length>0&&u["chart.key"].length>=3){this.centerx=this.centerx-this.gutterRight+5}if(typeof u["chart.centerx"]=="number")this.centerx=u["chart.centerx"];if(typeof u["chart.centery"]=="number")this.centery=u["chart.centery"];if(typeof u["chart.radius"]=="number")this.radius=u["chart.radius"];if(!this.colorsParsed){this.parseColors();this.colorsParsed=true}this.drawBackground();this.DrawRose();this.DrawLabels();o.strokeStyle="rgba(0,0,0,0)";if(u["chart.contextmenu"]){i.ShowContext(this)}if(u["chart.resizable"]){i.AllowResizing(this)}if(u["chart.adjustable"]){i.AllowAdjusting(this)}i.InstallEventListeners(this);if(this.firstDraw){i.fireCustomEvent(this,"onfirstdraw");this.firstDraw=false;this.firstDrawFunc()}i.FireCustomEvent(this,"ondraw");return this};this.drawBackground=this.DrawBackground=function(){o.lineWidth=1;if(u["chart.background.grid"]){if(typeof u["chart.background.grid.count"]=="number"){u["chart.background.grid.size"]=this.radius/u["chart.background.grid.count"]}o.beginPath();o.strokeStyle=u["chart.background.grid.color"];for(var e=u["chart.background.grid.size"];e<=this.radius;e+=u["chart.background.grid.size"]){o.moveTo(this.centerx+e,this.centery);o.arc(this.centerx,this.centery,e,0,i.TWOPI,false)}o.stroke();o.beginPath();if(typeof u["chart.background.grid.spokes"]=="number"){var t=360/u["chart.background.grid.spokes"];for(var e=t;e<=360;e+=t){o.arc(this.centerx,this.centery,this.radius,e/(180/i.PI)-i.HALFPI+this.startRadians,(e+1e-4)/(180/i.PI)-i.HALFPI+this.startRadians,false);o.lineTo(this.centerx,this.centery)}}else{for(var e=15;e<=360;e+=15){o.arc(this.centerx,this.centery,this.radius,e/(180/i.PI)-i.HALFPI,(e+1e-4)/(180/i.PI)-i.HALFPI,false);o.lineTo(this.centerx,this.centery)}}o.stroke()}if(u["chart.background.axes"]){o.beginPath();o.strokeStyle=u["chart.background.axes.color"];o.moveTo(this.centerx-this.radius,Math.round(this.centery));o.lineTo(this.centerx+this.radius,Math.round(this.centery));o.moveTo(Math.round(this.centerx-this.radius),this.centery-5);o.lineTo(Math.round(this.centerx-this.radius),this.centery+5);o.moveTo(Math.round(this.centerx+this.radius),this.centery-5);o.lineTo(Math.round(this.centerx+this.radius),this.centery+5);for(var e=this.centerx-this.radius;e<this.centerx+this.radius;e+=this.radius/5){o.moveTo(Math.round(e),this.centery-3);o.lineTo(Math.round(e),this.centery+3.5)}for(var e=this.centery-this.radius;e<this.centery+this.radius;e+=this.radius/5){o.moveTo(this.centerx-3,Math.round(e));o.lineTo(this.centerx+3,Math.round(e))}o.moveTo(Math.round(this.centerx),this.centery-this.radius);o.lineTo(Math.round(this.centerx),this.centery+this.radius);o.moveTo(this.centerx-5,Math.round(this.centery-this.radius));o.lineTo(this.centerx+5,Math.round(this.centery-this.radius));o.moveTo(this.centerx-5,Math.round(this.centery+this.radius));o.lineTo(this.centerx+5,Math.round(this.centery+this.radius));o.closePath();o.stroke()}};this.drawRose=this.DrawRose=function(){var e=0;var t=this.data;var n=RGraph.degrees2Radians(u["chart.margin"]);o.lineWidth=u["chart.linewidth"];if(i.is_null(u["chart.ymax"])){for(var r=0;r<t.length;++r){if(typeof t[r]=="number"){e=Math.max(e,t[r])}else if(typeof t[r]=="object"&&u["chart.variant"]=="non-equi-angular"){e=Math.max(e,t[r][0])}else{e=Math.max(e,i.array_sum(t[r]))}}this.scale2=i.getScale2(this,{max:e,min:0,"scale.thousand":u["chart.scale.thousand"],"scale.point":u["chart.scale.point"],"scale.decimals":u["chart.scale.decimals"],"ylabels.count":u["chart.labels.count"],"scale.round":u["chart.scale.round"],"units.pre":u["chart.units.pre"],"units.post":u["chart.units.post"]});this.max=this.scale2.max}else{var a=u["chart.ymax"];this.scale2=i.getScale2(this,{max:a,strict:true,"scale.thousand":u["chart.scale.thousand"],"scale.point":u["chart.scale.point"],"scale.decimals":u["chart.scale.decimals"],"ylabels.count":u["chart.labels.count"],"scale.round":u["chart.scale.round"],"units.pre":u["chart.units.pre"],"units.post":u["chart.units.post"]});this.max=this.scale2.max}this.sum=i.array_sum(t);o.moveTo(this.centerx,this.centery);o.stroke();if(u["chart.colors.alpha"]){o.globalAlpha=u["chart.colors.alpha"]}if(typeof u["chart.variant"]=="string"&&u["chart.variant"]=="non-equi-angular"){var f=0;for(var r=0;r<t.length;++r){f+=t[r][1]}for(var r=0;r<this.data.length;++r){var l=this.data[r][1]/f*i.TWOPI;var c=(this.data[r][0]-u["chart.ymin"])/(this.max-u["chart.ymin"])*this.radius;c=c*u["chart.animation.grow.multiplier"];o.strokeStyle=u["chart.strokestyle"];o.fillStyle=u["chart.colors"][0];if(u["chart.colors.sequential"]){o.fillStyle=u["chart.colors"][r]}o.beginPath();var h=this.startRadians*u["chart.animation.roundrobin.factor"]-i.HALFPI+n;var p=(this.startRadians+l)*u["chart.animation.roundrobin.factor"]-i.HALFPI-n;var d=this.getexploded(r,h,p,u["chart.exploded"]);var v=d[0];var m=d[1];o.arc(this.centerx+v,this.centery+m,u["chart.animation.roundrobin.radius"]?c*u["chart.animation.roundrobin.factor"]:c,h,p,0);o.lineTo(this.centerx+v,this.centery+m);o.closePath();o.stroke();o.fill();this.angles.push(gg=[h,p,0,c,this.centerx+v,this.centery+m]);this.startRadians+=l}}else{var g=0;for(var r=0;r<this.data.length;++r){var l=1/this.data.length*i.TWOPI;if(typeof this.data[r]=="number"){o.beginPath();o.strokeStyle=u["chart.strokestyle"];o.fillStyle=u["chart.colors"][0];if(u["chart.colors.sequential"]){o.fillStyle=u["chart.colors"][r]}var c=(this.data[r]-u["chart.ymin"])/(this.max-u["chart.ymin"])*this.radius;c=c*u["chart.animation.grow.multiplier"];var h=this.startRadians*u["chart.animation.roundrobin.factor"]-i.HALFPI+n;var p=this.startRadians*u["chart.animation.roundrobin.factor"]+l*u["chart.animation.roundrobin.factor"]-i.HALFPI-n;var d=this.getexploded(r,h,p,u["chart.exploded"]);var v=d[0];var m=d[1];o.arc(this.centerx+v,this.centery+m,u["chart.animation.roundrobin.radius"]?c*u["chart.animation.roundrobin.factor"]:c,h,p,0);o.lineTo(this.centerx+v,this.centery+m);o.closePath();o.stroke();o.fill();o.beginPath();if(p==0){}this.angles.push([h,p,0,c*u["chart.animation.roundrobin.factor"],this.centerx+v,this.centery+m])}else if(typeof this.data[r]=="object"){var n=u["chart.margin"]/(180/i.PI);if(!this.angles2[r]){this.angles2[r]=[]}for(var y=0;y<this.data[r].length;++y){var h=this.startRadians*u["chart.animation.roundrobin.factor"]-i.HALFPI+n;var p=this.startRadians*u["chart.animation.roundrobin.factor"]+l*u["chart.animation.roundrobin.factor"]-i.HALFPI-n;var d=this.getexploded(r,h,p,u["chart.exploded"]);var v=d[0];var m=d[1];o.strokeStyle=u["chart.strokestyle"];o.fillStyle=u["chart.colors"][y];if(u["chart.colors.sequential"]){o.fillStyle=u["chart.colors"][g++]}if(y==0){o.beginPath();var b=0;var w=(this.data[r][y]-u["chart.ymin"])/(this.max-u["chart.ymin"])*this.radius;w=w*u["chart.animation.grow.multiplier"];o.arc(this.centerx+v,this.centery+m,u["chart.animation.roundrobin.radius"]?w*u["chart.animation.roundrobin.factor"]:w,h,p,0);o.lineTo(this.centerx+v,this.centery+m);o.closePath();o.stroke();o.fill();this.angles.push([h,p,0,w*u["chart.animation.roundrobin.factor"],this.centerx+v,this.centery+m]);this.angles2[r].push([h,p,0,w*u["chart.animation.roundrobin.factor"],this.centerx+v,this.centery+m])}else{o.beginPath();var b=w;var w=(this.data[r][y]-u["chart.ymin"])/(this.max-u["chart.ymin"])*this.radius+b;w=w*u["chart.animation.grow.multiplier"];o.arc(this.centerx+v,this.centery+m,b*u["chart.animation.roundrobin.factor"],h,p,0);o.arc(this.centerx+v,this.centery+m,w*u["chart.animation.roundrobin.factor"],p,h,true);o.closePath();o.stroke();o.fill();this.angles.push([h,p,b*u["chart.animation.roundrobin.factor"],w*u["chart.animation.roundrobin.factor"],this.centerx+v,this.centery+m]);this.angles2[r].push([h,p,b*u["chart.animation.roundrobin.factor"],w*u["chart.animation.roundrobin.factor"],this.centerx+v,this.centery+m])}}}this.startRadians+=l}}if(u["chart.colors.alpha"]){o.globalAlpha=1}if(u["chart.title"]){i.DrawTitle(this,u["chart.title"],s.height/2-this.radius,this.centerx,u["chart.title.size"]?u["chart.title.size"]:u["chart.text.size"]+2)}};this.drawLabels=this.DrawLabels=function(){o.lineWidth=1;var e=u["chart.key"];if(e&&e.length){i.DrawKey(this,e,u["chart.colors"])}o.fillStyle=u["chart.text.color"];o.strokeStyle="black";var t=this.radius;var n=u["chart.text.font"];var r=u["chart.text.size"];var s=u["chart.labels.axes"].toLowerCase();var a=u["chart.scale.decimals"];var f=u["chart.units.pre"];var l=u["chart.units.post"];var c=this.centerx;var h=this.centery;if(typeof u["chart.labels"]=="object"&&u["chart.labels"]){this.DrawCircularLabels(o,u["chart.labels"],n,r,t+10)}if(typeof u["chart.text.size.scale"]=="number"){r=u["chart.text.size.scale"]}var p="rgba(255,255,255,0.8)";if(s.indexOf("n")>-1){for(var d=0;d<u["chart.labels.count"];++d){i.Text2(this,{font:n,size:r,x:c,y:h-t*((d+1)/u["chart.labels.count"]),text:this.scale2.labels[d],valign:"center",halign:"center",bounding:true,boundingFill:p,boundingStroke:u["chart.labels.boxed"]?"black":"rgba(0,0,0,0)",tag:"scale"})}}if(s.indexOf("s")>-1){for(var d=0;d<u["chart.labels.count"];++d){i.Text2(this,{font:n,size:r,x:c,y:h+t*((d+1)/u["chart.labels.count"]),text:this.scale2.labels[d],valign:"center",halign:"center",bounding:true,boundingFill:p,boundingStroke:u["chart.labels.boxed"]?"black":"rgba(0,0,0,0)",tag:"scale"})}}if(s.indexOf("e")>-1){for(var d=0;d<u["chart.labels.count"];++d){i.Text2(this,{font:n,size:r,x:c+t*((d+1)/u["chart.labels.count"]),y:h,text:this.scale2.labels[d],valign:"center",halign:"center",bounding:true,boundingFill:p,boundingStroke:u["chart.labels.boxed"]?"black":"rgba(0,0,0,0)",tag:"scale"})}}if(s.indexOf("w")>-1){for(var d=0;d<u["chart.labels.count"];++d){i.Text2(this,{font:n,size:r,x:c-t*((d+1)/u["chart.labels.count"]),y:h,text:this.scale2.labels[d],valign:"center",halign:"center",bounding:true,boundingFill:p,boundingStroke:u["chart.labels.boxed"]?"black":"rgba(0,0,0,0)",tag:"scale"})}}if(s.length>0){i.Text2(this,{font:n,size:r,x:c,y:h,text:typeof u["chart.ymin"]=="number"?i.number_format(this,Number(u["chart.ymin"]).toFixed(u["chart.scale.decimals"]),f,l):"0",valign:"center",halign:"center",bounding:true,boundingFill:p,boundingStroke:u["chart.labels.boxed"]?"black":"rgba(0,0,0,0)",tag:"scale"})}};this.drawCircularLabels=this.DrawCircularLabels=function(e,t,n,r,s){var o=u["chart.variant"];var a=u["chart.labels.position"];var s=s+5+u["chart.labels.offset"];var f=this.centerx;var l=this.centery;for(var c=0;c<t.length;++c){if(typeof o=="string"&&o=="non-equi-angular"){var h=Number(this.angles[c][0])+(this.angles[c][1]-this.angles[c][0])/2}else{var h=i.TWOPI/t.length*(c+1)-i.TWOPI/(t.length*2);var h=h-i.HALFPI+(u["chart.labels.position"]=="edge"?i.TWOPI/t.length/2:0)}var p=f+Math.cos(h)*s;var d=l+Math.sin(h)*s;if(p>f){halign="left"}else if(Math.round(p)==f){halign="center"}else{halign="right"}i.Text2(this,{font:n,size:r,x:p,y:d,text:String(t[c]),halign:halign,valign:"center",tag:"labels"})}};this.getShape=this.getSegment=function(e){i.FixEventObject(e);var t=this.angles;var n=[];for(var r=0;r<t.length;++r){var s=t[r][0];var a=t[r][1];var f=t[r][2];var l=t[r][3];var c=t[r][4];var h=t[r][5];var p=i.getMouseXY(e);var d=p[0]-c;var v=p[1]-h;o.beginPath();o.arc(c,h,f?f:.01,s,a,false);o.arc(c,h,l,a,s,true);o.closePath();if(o.isPointInPath(p[0],p[1])){t[r][6]=r;if(i.parseTooltipText){var m=i.parseTooltipText(u["chart.tooltips"],t[r][6])}t[r]["object"]=this;t[r]["x"]=t[r][4];t[r]["y"]=t[r][5];t[r]["angle.start"]=t[r][0];t[r]["angle.end"]=t[r][1];t[r]["radius.start"]=t[r][2];t[r]["radius.end"]=t[r][3];t[r]["index"]=t[r][6];t[r]["tooltip"]=m?m:null;return t[r]}}return null};this.getExploded=this.getexploded=function(e,t,n,r){var i,s;if(typeof r=="object"&&typeof r[e]=="number"){i=Math.cos((n-t)/2+t)*r[e];s=Math.sin((n-t)/2+t)*r[e]}else if(typeof r=="number"){i=Math.cos((n-t)/2+t)*r;s=Math.sin((n-t)/2+t)*r}else{i=0;s=0}return[i,s]};this.allowTooltips=this.AllowTooltips=function(){i.PreLoadTooltipImages(this);i.InstallWindowMousedownTooltipListener(this);i.InstallCanvasMousemoveTooltipListener(this);i.InstallCanvasMouseupTooltipListener(this)};this.highlight=this.Highlight=function(e){if(u["chart.tooltips.highlight"]){o.beginPath();o.strokeStyle=u["chart.highlight.stroke"];o.fillStyle=u["chart.highlight.fill"];o.arc(e["x"],e["y"],e["radius.end"],e["angle.start"],e["angle.end"],false);if(e["radius.start"]>0){o.arc(e["x"],e["y"],e["radius.start"],e["angle.end"],e["angle.start"],true)}else{o.lineTo(e["x"],e["y"])}o.closePath();o.stroke();o.fill()}};this.getObjectByXY=function(e){var t=RGraph.getMouseXY(e);var n=i.getHypLength(this.centerx,this.centery,t[0],t[1]);if(t[0]>this.centerx-this.radius&&t[0]<this.centerx+this.radius&&t[1]>this.centery-this.radius&&t[1]<this.centery+this.radius&&n<=this.radius){return this}};this.positionTooltip=function(e,t,n,r,s){var o=e.angles[s][4];var u=e.angles[s][5];var a=e.angles[s][0];var f=e.angles[s][1];var l=(e.angles[s][3]-e.angles[s][2])/2+e.angles[s][2];var h=(f-a)/2+a;var p=i.getCanvasXY(e.canvas);var d=this.gutterLeft;var v=this.gutterTop;var m=r.offsetWidth;var g=r.offsetHeight;r.style.overflow="";var y=new Image;y.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAFCAYAAACjKgd3AAAARUlEQVQYV2NkQAN79+797+RkhC4M5+/bd47B2dmZEVkBCgcmgcsgbAaA9GA1BCSBbhAuA/AagmwQPgMIGgIzCD0M0AMMAEFVIAa6UQgcAAAAAElFTkSuQmCC";y.style.position="absolute";y.id="__rgraph_tooltip_pointer__";y.style.top=r.offsetHeight-2+"px";r.appendChild(y);if(p[0]+o+Math.cos(h)*l-m/2<10){r.style.left=p[0]+o+Math.cos(h)*l-m*.1+"px";r.style.top=p[1]+u+Math.sin(h)*l-g-5+"px";y.style.left=m*.1-8.5+"px"}else if(p[0]+o+Math.cos(h)*l+m/2>c.body.offsetWidth-10){r.style.left=p[0]+o+Math.cos(h)*l-m*.9+"px";r.style.top=p[1]+u+Math.sin(h)*l-g-5+"px";y.style.left=m*.9-8.5+"px"}else{r.style.left=p[0]+o+Math.cos(h)*l-m/2+"px";r.style.top=p[1]+u+Math.sin(h)*l-g-5+"px";y.style.left=m*.5-8.5+"px"}};this.getRadius=function(e){if(e<0||e>this.max){return null}var t=e/this.max*this.radius;return t};this.parseColors=function(){if(this.original_colors.length===0){this.original_colors["chart.colors"]=i.array_clone(u["chart.colors"]);this.original_colors["chart.key.colors"]=i.array_clone(u["chart.key.colors"]);this.original_colors["chart.text.color"]=i.array_clone(u["chart.text.color"]);this.original_colors["chart.title.color"]=i.array_clone(u["chart.title.color"]);this.original_colors["chart.highlight.stroke"]=i.array_clone(u["chart.highlight.stroke"]);this.original_colors["chart.highlight.fill"]=i.array_clone(u["chart.highlight.fill"])}for(var e=0;e<u["chart.colors"].length;++e){u["chart.colors"][e]=this.parseSingleColorForGradient(u["chart.colors"][e])}if(!i.is_null(u["chart.key.colors"])){for(var e=0;e<u["chart.key.colors"].length;++e){u["chart.key.colors"][e]=this.parseSingleColorForGradient(u["chart.key.colors"][e])}}u["chart.text.color"]=this.parseSingleColorForGradient(u["chart.text.color"]);u["chart.title.color"]=this.parseSingleColorForGradient(u["chart.title.color"]);u["chart.highlight.fill"]=this.parseSingleColorForGradient(u["chart.highlight.fill"]);u["chart.highlight.stroke"]=this.parseSingleColorForGradient(u["chart.highlight.stroke"])};this.reset=function(){};this.parseSingleColorForGradient=function(e){if(!e||typeof e!="string"){return e}if(e.match(/^gradient\((.*)\)$/i)){var t=RegExp.$1.split(":");var n=o.createRadialGradient(this.centerx,this.centery,0,this.centerx,this.centery,this.radius);var r=1/(t.length-1);n.addColorStop(0,i.trim(t[0]));for(var s=1;s<t.length;++s){n.addColorStop(s*r,i.trim(t[s]))}}return n?n:e};this.interactiveKeyHighlight=function(e){var t=this.angles2;for(var n=0;n<this.angles2.length;n+=1){o.beginPath();o.lineWidth=2;o.fillStyle=u["chart.key.interactive.highlight.chart.fill"];o.strokeStyle=u["chart.key.interactive.highlight.chart.stroke"];o.arc(t[n][e][4],t[n][e][5],t[n][e][2],t[n][e][0],t[n][e][1],false);o.arc(t[n][e][4],t[n][e][5],t[n][e][3],t[n][e][1],t[n][e][0],true);o.closePath();o.fill();o.stroke()}return};this.on=function(e,t){if(e.substr(0,2)!=="on"){e="on"+e}this[e]=t;return this};this.firstDrawFunc=function(){};this.explode=function(){function f(){a=o/r*u;e.Set("exploded",a);i.clear(s);i.redrawCanvas(s);if(o++<r){i.Effects.updateCanvas(f)}else{n(e)}}var e=this;var t=arguments[0]||{};var n=arguments[1]||function(){};var r=t.frames?t.frames:30;var o=0;var u=h.max(s.width,s.height);var a=Number(this.Get("exploded"));f();return this};this.roundrobin=this.roundRobin=function(){function f(){i.clear(e.canvas);i.redrawCanvas(e.canvas);if(r++<n){e.set("animation.roundrobin.factor",r/n);e.set("margin",r/n*s);i.Effects.updateCanvas(f)}else{e.set("animation.roundrobin.factor",1);e.set("margin",s);a(e)}}var e=this;var t=arguments[0]||{};var n=t.frames||30;var r=0;var s=u["chart.margin"];var o=360/this.data.length/2;var a=arguments[1]||function(){};this.Set("chart.margin",o);this.Set("chart.animation.roundrobin.factor",0);f();return this};this.implode=function(){function f(){a=u-o/r*u;e.Set("exploded",a);i.clear(s);i.redrawCanvas(s);if(o++<r){i.Effects.updateCanvas(f)}else{i.clear(e.canvas);i.redrawCanvas(e.canvas);n(e)}}var e=this;var t=arguments[0]||{};var n=arguments[1]||function(){};var r=t.frames||30;var o=0;var u=h.max(s.width,s.height);var a=u;f();return this};this.grow=function(){function u(){e.Set("animation.grow.multiplier",o/r);i.clear(s);i.redrawCanvas(s);if(o<r){o++;i.Effects.updateCanvas(u)}else{n(e)}}var e=this;var t=arguments[0]||{};var n=arguments[1]||function(){};var r=t.frames||30;var o=0;u();return this};i.Register(this);if(t){i.parseObjectStyleConfig(this,e.options)}}
